/* Ładowanie krojów dla różnych motywów (zmiana czcionki sterowana JS) */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;600&family=Merriweather:wght@400;700&display=swap");

/* Fallback: podstawowy font zanim JS nadpisze zmienną */
:root {
    --font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    --radius: 0.5rem;
}

/* Motywy: każdy ma MIN. 3 kolory bazowe: --tone1, --tone2, --tone3
   Pozostałe kolory wyliczamy przez color-mix (globalna tonacja). */

/* ŚWIT (jasny) */
[data-theme="swit"] {
    --tone1: hsl(18 90% 58%);   /* akcent ciepły (pomarańcz) */
    --tone2: hsl(204 90% 45%);  /* główny (niebieski) */
    --tone3: hsl(145 55% 42%);  /* akcent sukcesu (zielony) */

    --primary: var(--tone2);
    --accent: var(--tone1);
    --success: var(--tone3);

    --bg: color-mix(in oklab, #ffffff 92%, var(--tone2));
    --card-bg: color-mix(in oklab, #ffffff 85%, var(--tone2));
    --elev-1: color-mix(in oklab, var(--card-bg) 85%, #000 0%);
    --border: color-mix(in oklab, var(--primary) 12%, #000 10%);
    --muted: color-mix(in oklab, var(--primary) 14%, #111 86%);
    --text: #121416;
    --text-inv: #ffffff;
    --link: color-mix(in oklab, var(--primary) 80%, #0a58ca);
}

/* ZMIERZCH (pół-jasny) */
[data-theme="zmierzch"] {
    --tone1: hsl(280 65% 60%);  /* fiolet */
    --tone2: hsl(32 90% 55%);   /* bursztyn */
    --tone3: hsl(200 50% 45%);  /* morski */

    --primary: var(--tone1);
    --accent: var(--tone2);
    --success: var(--tone3);

    --bg: color-mix(in oklab, #fff 88%, var(--primary));
    --card-bg: color-mix(in oklab, #fff 80%, var(--primary));
    --elev-1: color-mix(in oklab, var(--card-bg) 85%, #000 0%);
    --border: color-mix(in oklab, var(--primary) 18%, #000 8%);
    --muted: color-mix(in oklab, var(--primary) 22%, #111 78%);
    --text: #141218;
    --text-inv: #ffffff;
    --link: color-mix(in oklab, var(--accent) 60%, var(--primary) 40%);
}

/* NOC (ciemny) */
[data-theme="noc"] {
    --tone1: hsl(200 90% 60%);  /* cyjan */
    --tone2: hsl(330 80% 60%);  /* magenta */
    --tone3: hsl(60 80% 50%);   /* żółty */

    --primary: var(--tone1);
    --accent: var(--tone2);
    --success: var(--tone3);

    --bg: color-mix(in oklab, #000 94%, var(--primary));
    --card-bg: color-mix(in oklab, var(--bg) 75%, #fff 6%);
    --elev-1: color-mix(in oklab, var(--card-bg) 80%, #fff 8%);
    --border: color-mix(in oklab, var(--primary) 26%, #fff 14%);
    --muted: color-mix(in oklab, var(--primary) 20%, #ddd 80%);
    --text: #e7eaf1;
    --text-inv: #0b0d10;
    --link: color-mix(in oklab, var(--primary) 80%, #7ab0ff);
}

/* Podstawowe style globalne */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: var(--font-family, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif);
    line-height: 1.5;
}

/* Układ */
.site-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 1rem 1.25rem;
    background: var(--card-bg);
    border-bottom: 1px solid var(--border);
    position: sticky; top: 0; backdrop-filter: blur(6px);
}
.brand { font-weight: 700; text-decoration: none; color: var(--text); }
.nav { display: flex; gap: .75rem; }
.nav-link { color: var(--link); text-decoration: none; font-weight: 600; }
.nav-link:hover { text-decoration: underline; }

.container {
    max-width: 960px; margin: 2rem auto; padding: 0 1rem;
}

/* Karty i formularze */
.card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: 0 10px 30px color-mix(in oklab, #000 10%, var(--primary) 10%);
}
.auth-wrap { display: grid; place-items: center; min-height: calc(100vh - 6rem); }
.auth-card { width: min(480px, 92vw); padding: 1.25rem; }
.card-title { margin: 0 0 1rem; font-size: 1.6rem; }

.form-field { display: grid; gap: .375rem; margin-bottom: .9rem; }
.form-field label { font-weight: 600; }
.input, input, select, textarea {
    width: 100%; padding: .65rem .75rem;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: var(--elev-1);
    color: var(--text);
    outline: none;
    transition: border-color .2s, box-shadow .2s, background .2s;
}
input:focus, select:focus, textarea:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 .2rem color-mix(in oklab, var(--accent) 28%, transparent);
}
.field-error { color: color-mix(in oklab, var(--accent) 70%, #ff3d3d); font-size: .9rem; }

.btn {
    display: inline-flex; align-items: center; justify-content: center;
    border: 1px solid transparent; cursor: pointer;
    border-radius: 12px; padding: .65rem 1rem; font-weight: 700;
    transition: filter .15s, transform .05s, background .2s, color .2s;
}
.btn:active { transform: translateY(1px); }
.btn-primary {
    background: linear-gradient(180deg,
    color-mix(in oklab, var(--primary) 90%, #fff 10%),
    color-mix(in oklab, var(--primary) 90%, #000 10%)
    );
    color: var(--text-inv);
}
.btn-primary:hover { filter: brightness(1.05); }
.btn-ghost {
    background: transparent; border-color: var(--border); color: var(--text);
}
.link { color: var(--link); text-decoration: none; }
.link:hover { text-decoration: underline; }
.muted { color: var(--muted); }
.mt-sm { margin-top: .75rem; }

/* Przełącznik motywu w lewym dolnym rogu */
.theme-switcher {
    position: fixed; left: 1rem; bottom: 1rem;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: .5rem .6rem;
    box-shadow: 0 6px 20px color-mix(in oklab, #000 12%, var(--primary) 8%);
}
.theme-switcher select { min-width: 9rem; }

/* Ułatwienia dostępu */
.sr-only {
    position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}

/* Upewnij się, że pola generowane przez Django nie tracą stylu */
input[type="text"], input[type="email"], input[type="password"] {
    font: inherit;
}